<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DualPlay | Admin</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&family=Poppins:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/public/favicon/logo.png" />

    <!-- Estilos -->
    <link rel="stylesheet" href="/public/css/login.css" disabled />
    <link rel="stylesheet" href="/public/css/admin.css" />
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">DualPlay</a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="/admin">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/altaproducto/?tipo=videojuego">Agregar Videojuegos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/altaproducto/?tipo=juegodemesa">Agregar Juegos de Mesa</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container py-4">
      <h1 class="mb-3">ðŸŽ® Panel de AdministraciÃ³n</h1>
      <p id="parrafodash" class="text-muted mb-4">
        GestionÃ¡ tus videojuegos y juegos de mesa desde un solo lugar.
      </p>

      <!-- VIDEOJUEGOS -->
      <div class="mb-5">
        <h2>ðŸŽ® Videojuegos</h2>
        <a href="/altaproducto/?tipo=videojuego" class="btn btn-success mb-3">
          âž• Agregar Videojuego
        </a>

        <div class="row">
          <% if (videojuegos.length === 0) { %>
          <p class="text-muted">No hay videojuegos cargados.</p>
          <% } else { %> <% videojuegos.forEach(v => { %>
          <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">


                <% if (!v.stock) { %>
                  <span class="badge-stock">SIN STOCK</span>
                <% } %>

              <img
                src="http://localhost:3000/public<%= v.imagen %>"
                class="card-img-top"
                style="height: 200px; object-fit: cover"
              />

              <div class="card-body d-flex flex-column">
                <h5><%= v.nombre %></h5>
                <p>$<%= v.precio %></p>


                <div class="mt-auto">
                  <a
                    href="/actualizarproducto/?tipo=videojuego&id=<%= v.id %>"
                    class="btn btn-warning w-100 mb-2"
                  >
                    Editar
                  </a>
                  <% if (v.stock) { %>
                  <button
                    class="btn btn-danger w-100"
                    onclick="eliminar('videojuego', <%= v.id %>)"
                  >
                    Deshabilitar Stock
                  </button>
                  <% } else { %>
                    <button class="btn btn-success w-100" onclick="darAlta('videojuego', <%= v.id %>)">
                    Habilitar Stock
                  </a>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
          <% }) %> <% } %>
        </div>
      </div>

      <hr />

      <!-- JUEGOS DE MESA -->
      <div>
        <h2>ðŸŽ² Juegos de Mesa</h2>
        <a href="/altaproducto/?tipo=juegodemesa" class="btn btn-success mb-3">
          âž• Agregar Juego de Mesa
        </a>

        <div class="row">
          <% if (juegosMesa.length === 0) { %>
          <p class="text-muted">No hay juegos de mesa cargados.</p>
          <% } else { %> <% juegosMesa.forEach(j => { %>
          <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">


              <% if (!j.stock) { %>
                <span class="badge-stock">SIN STOCK</span>
              <% } %>

              <img
                src="http://localhost:3000/public<%= j.imagen %>"
                class="card-img-top"
                style="height: 200px; object-fit: cover"
              />

              <div class="card-body d-flex flex-column">
                <h5><%= j.nombre %></h5>
                <p>$<%= j.precio %></p>


                
                <div class="mt-auto">
                  <a
                    href="/actualizarproducto/?tipo=juegodemesa&id=<%= j.id %>"
                    class="btn btn-warning w-100 mb-2"
                  >
                    Editar
                  </a>
                  <% if (j.stock) { %>
                  <button
                    class="btn btn-danger w-100"
                    onclick="eliminar('juegoDeMesa', <%= j.id %>)"
                  >
                    Deshabilitar Stock
                  </button>
                  <% } else { %>
                    <button class="btn btn-success w-100" onclick="darAlta('juegoMesa', <%= j.id %>)">
                      Habilitar Stock
                    </a>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
          <% }) %> <% } %>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/js/admin.js"></script>
  </body>
</html>
